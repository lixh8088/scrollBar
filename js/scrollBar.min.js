!function(a){jQuery.fn.extend({scrollBar:function(o){var d=a.extend({width:1e3,height:300,orient:"v",position:"right",scrollDistance:10,wrapperClass:"ScrollDiv",railClass:"scrollRail",barClass:"scrollBar",keyEvent:!0,barShow:!0,isFadeOut:!1,wrapperBorderColor:"#e1e1e1",barColor:"rgba(0, 0, 0, 0.2)",barSize:8,barRadius:"",railColor:"transparent",railSize:10},o),t="<div></div>",f=this,e=a(t).addClass(d.wrapperClass),b=a(t).addClass(d.railClass),g=a(t).addClass(d.barClass);f.css({position:"absolute",left:0,top:0}),e.css({width:d.width+"px",height:d.height+"px",overflow:"hidden",position:"relative",border:"1px solid "+d.wrapperBorderColor}),g.css({backgroundColor:d.barColor,borderRadius:d.barRadius?d.barRadius+"px":Math.ceil(d.barSize/2)+"px",cursor:"pointer",opacity:d.barShow?1:0,position:"absolute",transition:"opacity 0.5s"}),b.css({backgroundColor:d.railColor,position:"absolute"}),"h"==d.orient?(b.css({width:d.width+"px",height:d.railSize+"px",left:0,top:"bottom"==d.position?"auto":0,bottom:"bottom"==d.position?0:"auto"}),g.css({height:d.barSize+"px",width:Math.floor(parseInt(d.width)*parseInt(d.width)/f.width()),left:0,right:"auto",top:"bottom"==d.position?"auto":Math.ceil(railSize-barSize)/2+"px",bottom:"bottom"==d.position?Math.ceil(d.railSize-d.barSize)/2+"px":"auto"})):"v"==d.orient&&(b.css({width:d.railSize+"px",height:d.height,left:"left"==d.position?0:"auto",right:"left"==d.position?"auto":0,top:0,bottom:"auto"}),g.css({width:d.barSize+"px",height:Math.floor(parseInt(d.height)*parseInt(d.height)/f.outerHeight(!0)),left:"left"==d.position?Math.ceil(d.railSize-d.barSize)/2+"px":"auto",right:"left"==d.position?"auto":Math.ceil(d.railSize-d.barSize)/2+"px",top:0,bottom:"auto"})),f.wrap(e),f.parent().append(b),f.parent().append(g);g=a("."+d.barClass),b=a("."+d.railClass);function i(o,t,e,i){var r,a,s,n,l,c,p,u,h;if(c=b.outerWidth(!0)-g.outerWidth(!0),p=b.outerHeight(!0)-g.outerHeight(!0),1==i)"h"==d.orient?e=g.position().left:"v"==d.orient&&(e=g.position().top),t.wheelDelta?l=0<t.wheelDelta?e-d.scrollDistance:e+d.scrollDistance:t.detail&&(l=0<t.detail?e+d.scrollDistance:e-d.scrollDistance);else if(2==i)r=b.offset(),a=o.pageX-r.left,s=o.pageY-r.top,n=t.pageX-a-r.left+e,l=t.pageY-s-r.top+e;else if(3==i)if("h"==d.orient?e=g.position().left:"v"==d.orient&&(e=g.position().top),"h"==d.orient)switch(t.keyCode){case 37:n=e-d.scrollDistance;break;case 38:l=0;break;case 39:n=e+d.scrollDistance;break;case 40:l=0}else if("v"==d.orient){switch(t.keyCode){case 37:n=0;break;case 38:l=e-d.scrollDistance;break;case 39:n=0;break;case 40:l=e+d.scrollDistance}e=g.position().top}return n<0?n=0:c<n&&(n=c),l<0?l=0:p<l&&(l=p),"h"==d.orient?(u=Math.ceil(n/b.outerWidth(!0)*f.outerWidth(!0)),h=n):"v"==d.orient&&(u=Math.ceil(l/b.outerHeight(!0)*f.outerHeight(!0)),h=l),{scrollDistance:u,barDistance:h}}function r(o){"h"==d.orient?(f.css({left:-o.scrollDistance+"px"}),g.css({left:o.barDistance+"px"})):"v"==d.orient&&(f.css({top:-o.scrollDistance+"px"}),g.css({top:o.barDistance+"px"}))}g.on("mousedown",function(t){t.stopPropagation(),t.preventDefault(),a("body").css("cursor","pointer");var e=function(){{if("h"==d.orient)return g.position().left;if("v"==d.orient)return g.position().top}}();a(document).mousemove(function(o){r(i(t,o,e,2))})}),a(document).on("mouseup",function(o){o.stopPropagation(),a(document).off("mousemove"),a("body").css("cursor","default")}).on("mouseleave",function(o){console.log(111),o.stopPropagation(),a(document).off("mousemove"),a("body").css("cursor","default")}),f.on("mouseenter",function(){!d.barShow&&d.isFadeOut&&g.css("opacity",1)}).on("mouseleave",function(){!d.barShow&&d.isFadeOut&&g.css("opacity",0)}),f.on("mouseover",function(t){var e;t.stopPropagation(),"h"==d.orient?e=g.position().left:"v"==d.orient&&(e=g.position().top),document.body.onmousewheel=function(o){o.preventDefault(),o=o||window.event,r(i(t,o,e,1))},document.body.addEventListener("DOMMouseScroll",function(o){o.preventDefault(),r(i(t,o,e,1))}),a(document).off("keydown").on("keydown",function(o){d.keyEvent&&(o.preventDefault(),o.stopPropagation(),r(i(t,o,e,3)))})})}}),jQuery.fn.extend({scrollBar:jQuery.fn.scrollBar})}(jQuery);